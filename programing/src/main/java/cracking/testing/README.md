# 테스팅
> 테스팅과 관련된 질문은 보통 4가지 범주에 속한다
> 1.실생활에서 접하는 객체를 테스트하라
> 2.소프트웨어 하나를 테스트하라
> 3.주어진 함수에 대한 테스트 코드를 작성하라
> 4.발생한 이슈에 대한 해결책을 찾아내라

#### 면접관이 평가하는것
큰 그림을 이해하고 있는가
- 소프트웨어가 지향하는 바가 무엇인지 이해하고 있는가?, 테스트 간의 우선순위를 적절히 매길수 있는가?
- 아마존과 같은 전자 상거래를 테스트한다고 할 때 이미지가 적절한 장소에 뜨는것도 중요하지만 구매 대금이 정확하게 지불되었는지, 제품이 배송목록에 추가되었는지 테스트 하는게 더 중요하다.


퍼즐 조각을 제대로 맞추는 방법을 아는가
- 소프트웨어가 어떻게 동작하는지, 각 소프트웨어가 보다 더 큰 생태계의 일부로 어떻게 귀속되는지 이해하고 있는가?
- 구글의 스프레드시트를 테스트할 때 문서를 열고 저장하고 편집하는 테스트도 중요하지만 Gmail이나 다른 플러그인과의 연동성을 테스트하는게 더 중요하다


조직화
- 문제를 구조적으로 접근하는가?
- 카메라의 테스트 케이스를 찾으라고 할 때 훌륭한 지원자는 사진 촬영, 이미지 관리, 설정 등의 범주로 시스템을 나눈 후에 테스트를 만들어 간다.


실용성
- 실제로 적용가능한 합리적인 테스트 계획을 세울수 있는가?

#### 실제 세계에서 객체 테스트하기
소프트웨어가 아닌 펜이나 클립을 테스트하라고 하면 어떻게 할까?
1단계: 사용자는 누구인가? 클립의 사용목적은 무었인가?
- 종이를 묶어두기 위해서 일수도 있지만 클립을 구부려서 모양을 내는게 목적일 수 있다


2단계: 어떤 use case가 있나?
- Use Case를 만들어 두면 유용하다.

3단계: 한계 조건은?
- 한번에 50장을 묶을수 있는가?

4단계: 스트레스 조건과 장애 조건은?
- 문제가 없는 제품은 없으므로 장애가 발생하는 조건을 분석하는것도 필요하다
- 세탁기를 테스트한다면 세탁기가 한번에 적어도 30벌의 셔츠나 바지를 세탁할 수 있는지 알아봐야 한다.

5단계: 테스트는 어떻게 수행할 것인가?
- 의자를 5년동안 아무문제 없이 사용할 수 있는지 테스트할 때 실제 5년동안 사용해볼순 없다. 정상적인 사용 횟수를 추적하여 기계를 이용하여 테스트하는게 좋다.

#### 소프트웨어 테스팅
하나의 소프트웨어를 테스트하는 것은 실제 세계의 객체를 테스트하는 것과 아주 유사한다. 가장 큰 차이점은 소프트웨어의 경우 성능 테스트의 세부사항을 더 강조한다.

**수작업 테스트 vs 자동화된 테스트**
- 모든것을 자동화할순 없다. 해당 컨텐츠가 포르노와 연관되어 있는지는 컴퓨터가 효과적으로 검사하기 어렵다. 컴퓨터는 일반적으로 살펴보라고 한 문제들만 인지하지만 인간은 추가적으로 새로운 문제들을 밝혀낼 수 있다.

**블랙박스 테스트 vs 화이트박스 테스트**
- 블랙박스 테스트는 소프트웨어를 주어진 그대로 테스트 해야하고 화이트박스 테스트는 그 내부의 개별 함수들을 프로그램적으로 접근하여 테스트할 수 있다.

1단계: 블랙박스 테스트인가? 화이트박스 테스트인가?
- 미리 이러한 질문을 통해 인지 후 테스트하자

2단계: 누가 사용할 것인가? 왜 사용하는가?
- 소프트웨어는 여러명의 사용자를 대상으로 하므로 이 점을 염두하고 설계해야 한다.
- 부모가 웹 브라우저를 통제하는 소프트웨어를 테스트한다면 사용자는 부모, 아이들, 제 3자가 될수 있다.

3단계: 어떤 Use Case들이 있나?
- 아이들이 불법적인 콘텐츠에 접근하는 경우, 합법적인 컨텐츠에 접근하는 경우 등 다양한 사용예시가 있다.

4단계: 한계조건?
- 모든 웹사이트를 차단할수 있나? 특정 사이트만 차단할 수 있나?

5단계: 스트레스 조건과 장애 조건?
- 장애가 발생한다고 컴퓨터가 죽진 않는다. 특정 사이트 차단이 해제되거나 차단 하지 않은 사이트가 차단되거나 그런 일이 벌어질 것이다. 그러므로 차단을 해제할수 있는 key가 필요한지에 대한 이야기가 필요하다

6단계: 테스트 케이스는? 테스트 실행은 어떻게?
- 아무 생각없이 시나리오를 짜면 안된다. 테스트에 체계가 잡혀있지 않으면 중요한 부분의 테스트를 빼먹을 수도 있다.
- 주요 부분에 따라 테스트를 나누고 거기서 부터 공략한다.

#### 함수 테스트
가장 쉬운 종류의 테스트이다. 보통 입렵과 출력을 확인하는 테스트만 하면 된다.
하지만 어떤 가정을 하건 대화를 통해 상황을 풀어나가야 한다.
sort(int[] arr)를 테스트 하라는 문제를 받았을 때 순서

**1단계: 테스트 케이스 정의**
- **정상적인 케이스:** 홀수, 짝수등 다양한 경우를 테스트 해야한다.
- **극단적인 케이스:** 빈 배열일때는? 원소가 하나라면? 테스트 해야한다.
- **Null, Illegal Input:** 입력이 잘못되었을 때 동작을 테스트 해야한다.
- **특수한 입력:** 이미 정렬된 배열이 입력이라면? 완적 역순이라면?


**2단계: 예상되는 결과를 정의**

**3단계: 테스트 코드 작성**

#### 문제 해결에 관한 문제
이미 있는 장애를 어떻게 디버깅하고 해결할 것인지를 설명해야할 때도 있다.
구글 크롬 팀에서 일하고 있는데 크롬을 실행하자마자 브라우저가 죽는다면 어떻게 디버깅 하겠는가?

**1단계: 시나리오를 이해하라**
- 최대한 많은 질문을 통해 시나리오를 이해해야 한다.
- 사용자는 얼마동안 이 문제를 겪었나?
- 브라우저 버전, 운영체제 버전은?
- 항상 똑같이 발생하는가? 빈도가 어떠한가?
- 오류가 발생하면 오류 보고서가 뜨는가?


**2단계: 문제를 쪼개라**
- Window의 시작 메뉴로 간다.
- 크롬 아이콘을 클릭한다.
- 브라우저가 시작된다.
- 브라우저가 설정을 읽어드린다.
- 브라우저가 홈페이지에 HTTP요청을 날린다
- 브라우저가 HTTP응답을 받는다.
- 브라우저가 웹 페이지를 파싱한다
- 브라우저가 웹 페이지를 화면에 표시한다.
- 이러한 시나리오를 통해 문제를 찾아보면 문제지점을 파악할 수 있다.

**3단계: 구체적이고 관리 가능한 테스트를 생성하라**
- 현실적인 지시사항이 있어야한다. 사용자들에게 테스트를 요구할순 없다.

### 문제
#### 1.
실행중 죽어버리는 프로그램의 소스코드가 있다. 디버거에서 열번 실행해본 결과 같은 지점에서 죽는 일은 없었다. 단일 스레드 프로그램이고 C 표준 라이브러리만 사용된다. 어떤 오류가 생길수 있을까?

프로그램이 무작위로 죽는데는 일반적인 이유들이 있다.
1. 랜덤변수: 프로그램 안에서 난수를 사용하거나, 프로그램 실행시 마다 다른 경로로 실행되는 컴포넌트가 있을수 있다.
2. 초기화하지 않은 변수: 변수의 값이 초기화 되지 않은 프로그램의 경우 문제가 생길수 있다.
3. 메모리 누수: 프로그램의 메모리가 부족할수도 있다. 프로그램이 죽는 시점에 몇 개나 되는 프로세스가 돌고 있는지에 따라서 랜덤적으로 에러가 발생할 것이다.
4. 외부 의존성: 다른 외부의존성에 의해 프로그램이 종료될 수 있다.

제외 기법을 사용하여 시스템의 모든 프로그램을 닫고 하나씩 추적해나가면 좋을 방법이 될수도 있다.

#### 2.
테스트 도구없이 웹 페이지의 부하테스트를 실행해보라

부하테스트를 시행하면 어떤 웹 프로그램이 최대로 감당할 수 있는 용량이 얼만인지 알아낼 수 있고 성능을 저해하는 병목구간을 찾을수 있다.
부하테스트에서 주로 사용되는 성능지표들은 다음과 같다.
- 반응 시간
- 처리량
- 자원 사용률
- 시스템이 감내해낼 수 있는 최대 부하

테스트 도구가 없을때는 기본적으로 스스로 만들어야 한다. 예를들어 수천명의 가상의 사용자를 만들어 부하 테스트를 진행할 수도있다.

다중 쓰레드 프로그램을 만들어서 스레드 각각이 페이지를 로드하는데 사용하여 각 스레드별 응답시간이나 I/O 속도를 측정하면 된다.

그후에 테스트 동안 수집된 데이터를 분석하여 가능한 기준 수치와 비교한다.

#### 3.
ATM을 테스트 해보라

먼저 가정을 분명히 하기위해 수많은 질문을 던져라
1. ATM의 사용자가 일반인인가? 시각 장애인 인가?
2. 무슨 용도로 사용하는가? 입금? 출금? 조회?
3. 테스트를 할수 있는 도구가 무었인가? ATM만 존재하나?
